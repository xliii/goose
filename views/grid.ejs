<html>
<% include templates/head.ejs %>

<script>
    $(document).ready(function() {
        $('.cell').click(function() {
            var played = $(this).hasClass('success');
            $(this).data('player');
            console.log($(this).data('goose'));
        });
    });
</script>

<body>
<h1>Grid of games</h1>
<div class="container">
    <table class="table table-bordered grid">
        <tr>
            <th></th>
            <% players.forEach(function(player) { %>
            <th><%= player %></th>
            <% })%>
        </tr>
        <% games.forEach(function(game) { %>
        <tr>
            <td><b><%= game.title %></b> by <%= game.author %></td>
            <% players.forEach(function(player) { %>
                <% if (game.author == player) { %>
                    <td class="crossed"></td>
                <% } else if (game.players.indexOf(player) < 0) {%>
                    <td class="cell" data-player="<%= player %>" data-goose="<%= game.id %>"></td>
                <% } else {%>
                    <td class="cell success" data-player="<%= player %>" data-goose="<%= game.id %>"></td>
                <% } %>
            <% }) %>
        </tr>
        <% })%>
    </table>
</div>
</body>
</html>